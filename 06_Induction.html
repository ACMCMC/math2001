<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6. Induction &mdash; The mechanics of proof  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Index of Lean tactics" href="Index_of_Tactics.html" />
    <link rel="prev" title="5. Logic" href="05_Logic.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> The mechanics of proof
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="01_Proofs_by_Calculation.html">1. Proofs by calculation</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_Proofs_with_Structure.html">2. Proofs with structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_Parity_and_Divisibility.html">3. Parity and divisibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_Proofs_with_Structure_II.html">4. Proofs with structure, II</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_Logic.html">5. Logic</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">6. Induction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">6.1. Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example">6.1.1. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">6.1.2. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modeq-pow-proof">6.1.3. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pow-eq-zero-proof">6.1.4. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">6.1.5. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#induction-starting-point">6.1.6. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">6.1.7. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exercises">6.1.8. Exercises</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#recurrence-relations">6.2. Recurrence relations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id8">6.2.1. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">6.2.2. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">6.2.3. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">6.2.4. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">6.2.5. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id13">6.2.6. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">6.2.7. Exercises</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#two-step-induction">6.3. Two-step induction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id16">6.3.1. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">6.3.2. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id18">6.3.3. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id19">6.3.4. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id20">6.3.5. Exercises</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Index_of_Tactics.html">Index of Lean tactics</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Homework.html">Homework</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">The mechanics of proof</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">6. </span>Induction</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/06_Induction.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="induction">
<span id="id1"></span><h1><span class="section-number">6. </span>Induction<a class="headerlink" href="#induction" title="Permalink to this headline">&#61633;</a></h1>
<section id="introduction">
<span id="induction-intro"></span><h2><span class="section-number">6.1. </span>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">&#61633;</a></h2>
<section id="example">
<h3><span class="section-number">6.1.1. </span>Example<a class="headerlink" href="#example" title="Permalink to this headline">&#61633;</a></h3>
<div class="admonition-problem admonition">
<p class="admonition-title">Problem</p>
<p>Let <span class="math notranslate nohighlight">\(n\)</span> be a natural number.  Show that <span class="math notranslate nohighlight">\(2 ^n\ge n+1\)</span>.</p>
</div>
<div class="admonition-solution admonition">
<p class="admonition-title">Solution</p>
<p>We prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>.  The base case, <span class="math notranslate nohighlight">\(2^0\geq 0+1\)</span>, is clear.</p>
<p>Suppose now that for some natural number <span class="math notranslate nohighlight">\(k\)</span>, it is true that <span class="math notranslate nohighlight">\(2 ^k\ge k+1\)</span>.  Then</p>
<div class="math notranslate nohighlight">
\[\begin{split}2^{k+1} &amp;=  2 \cdot 2^k \\
&amp;\ge 2(k+1)\\
&amp;=(k+1+1) + k\\
&amp;\geq k+1+1.\end{split}\]</div>
</div>
<p>In Lean, the tactic <code class="docutils literal notranslate"><span class="pre">simple_induction</span></code> will set up an induction proof.  Here, after the line
<code class="docutils literal notranslate"><span class="pre">simple_induction</span> <span class="pre">n</span> <span class="pre">with</span> <span class="pre">k</span> <span class="pre">IH</span></code>, the goal state displays a single goal,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>n : &#8469;
&#8866; 2 ^ n &#8805; n + 1
</pre></div>
</div>
<p>and after the tactic is used the goal state displays two goals, one for the base case and one for
the inductive step.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&#8866; 2 ^ 0 &#8805; 0 + 1

k : &#8469;
IH : 2 ^ k &#8805; k + 1
&#8866; 2 ^ (k + 1) &#8805; k + 1 + 1
</pre></div>
</div>
<p>Here is the full proof in Lean.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8805;</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simple_induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">k</span> <span class="n">IH</span>
  <span class="bp">&#183;</span> <span class="c1">-- base case</span>
    <span class="n">numbers</span>
  <span class="bp">&#183;</span> <span class="c1">-- inductive step</span>
    <span class="k">calc</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">k</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">ring</span>
      <span class="n">_</span> <span class="bp">&#8805;</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rel</span> <span class="o">[</span><span class="n">IH</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="n">k</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">ring</span>
      <span class="n">_</span> <span class="bp">&#8805;</span> <span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">extra</span>
</pre></div>
</div>
</section>
<section id="id2">
<h3><span class="section-number">6.1.2. </span>Example<a class="headerlink" href="#id2" title="Permalink to this headline">&#61633;</a></h3>
<div class="admonition-theorem admonition">
<p class="admonition-title">Theorem</p>
<p>Let <span class="math notranslate nohighlight">\(n\)</span> be a natural number.  Then <span class="math notranslate nohighlight">\(n\)</span> is either even or odd.</p>
</div>
<p>(Compare <a class="reference internal" href="03_Parity_and_Divisibility.html#even-or-odd"><span class="std std-numref">Example 3.1.9</span></a>, <a class="reference internal" href="04_Proofs_with_Structure_II.html#even-or-odd-proof"><span class="std std-numref">Example 4.2.9</span></a>.)</p>
<div class="admonition-proof admonition">
<p class="admonition-title">Proof</p>
<p>We prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>.</p>
<p>The base case is to show that 0 is either even or odd.  We will show that it is even.  Indeed,
<span class="math notranslate nohighlight">\(0=2\cdot 0\)</span>.</p>
<p>Suppose now that for some natural number <span class="math notranslate nohighlight">\(k\)</span>, it is true that <span class="math notranslate nohighlight">\(k\)</span> is either even or
odd.</p>
<p><strong>Case 1</strong> (<span class="math notranslate nohighlight">\(k\)</span> is even): Then there exists an integer <span class="math notranslate nohighlight">\(x\)</span> such that <span class="math notranslate nohighlight">\(k=2x\)</span>, and
so <span class="math notranslate nohighlight">\(k+1 = 2x+1\)</span>, so <span class="math notranslate nohighlight">\(k+1\)</span> is odd.</p>
<p><strong>Case 2</strong> (<span class="math notranslate nohighlight">\(k\)</span> is odd): Then there exists an integer <span class="math notranslate nohighlight">\(x\)</span> such that <span class="math notranslate nohighlight">\(k=2x+1\)</span>,
and</p>
<div class="math notranslate nohighlight">
\[\begin{split}k+1 &amp;=  (2x+1)+1 \\
&amp;= 2(x+1),\end{split}\]</div>
<p>so <span class="math notranslate nohighlight">\(k+1\)</span> is even.</p>
</div>
<p>Here is the outline of this argument in Lean.  Fill in the sorries.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">Nat.Even</span> <span class="n">n</span> <span class="bp">&#8744;</span> <span class="n">Nat.Odd</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simple_induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">k</span> <span class="n">IH</span>
  <span class="bp">&#183;</span> <span class="c1">-- base case</span>
    <span class="gr">sorry</span>
  <span class="bp">&#183;</span> <span class="c1">-- inductive step</span>
    <span class="n">obtain</span> <span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">&#10217;</span> <span class="bp">|</span> <span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">&#10217;</span> <span class="o">:=</span> <span class="n">IH</span>
    <span class="bp">&#183;</span> <span class="gr">sorry</span>
    <span class="bp">&#183;</span> <span class="gr">sorry</span>
</pre></div>
</div>
</section>
<section id="modeq-pow-proof">
<span id="id3"></span><h3><span class="section-number">6.1.3. </span>Example<a class="headerlink" href="#modeq-pow-proof" title="Permalink to this headline">&#61633;</a></h3>
<div class="admonition-theorem admonition">
<p class="admonition-title">Theorem</p>
<p>Let <span class="math notranslate nohighlight">\(a, b, d\)</span> be integers, and suppose that <span class="math notranslate nohighlight">\(a\equiv b \mod d\)</span>.  Let <span class="math notranslate nohighlight">\(n\)</span> be a
natural number.  Then  <span class="math notranslate nohighlight">\(a^n\equiv b ^ n \mod d\)</span>.</p>
</div>
<p>This is the power rule for modular arithmetic, the lemma <code class="docutils literal notranslate"><span class="pre">Int.modEq.pow</span></code>, which we stated without
proof in <a class="reference internal" href="03_Parity_and_Divisibility.html#modeq-pow"><span class="std std-numref">Example 3.3.9</span></a>.  It is one of the lemmas which are bundled together to
form the tactic <code class="docutils literal notranslate"><span class="pre">rel</span></code>&#8217;s capability for modular arithmetic.</p>
<div class="admonition-proof admonition">
<p class="admonition-title">Proof</p>
<p>We prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>.</p>
<p>We first note that <span class="math notranslate nohighlight">\(a^0-b^0 = d\cdot 0\)</span>, so <span class="math notranslate nohighlight">\(d\mid a^0-b^0\)</span>, so
<span class="math notranslate nohighlight">\(a^0\equiv b ^ 0 \mod d\)</span>. This is the base case.</p>
<p>Now, let <span class="math notranslate nohighlight">\(k\)</span> be a natural number, and suppose that  <span class="math notranslate nohighlight">\(a^k\equiv b ^ k \mod d\)</span>.  Then
there exists an integer <span class="math notranslate nohighlight">\(x\)</span> such that <span class="math notranslate nohighlight">\(a^k- b ^ k =dx\)</span>. Also, by hypothesis,
<span class="math notranslate nohighlight">\(a\equiv b \mod d\)</span>, so there exists an integer <span class="math notranslate nohighlight">\(y\)</span> such that <span class="math notranslate nohighlight">\(a-b=dy\)</span>.  We then
have</p>
<div class="math notranslate nohighlight">
\[\begin{split}a^{k+1}-b^{k+1} &amp;= a(a^k-b^k)+b^k(a-b) \\
&amp;= a(dx) +b^k(dy)\\
&amp;=d(ax+b^ky),\end{split}\]</div>
<p>so <span class="math notranslate nohighlight">\(d\mid a^{k+1}-b^{k+1}\)</span>, so <span class="math notranslate nohighlight">\(a^{k+1}\equiv b ^ {k+1} \mod d\)</span>.</p>
</div>
<p>Write out this proof in Lean.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">d</span> <span class="o">:</span> <span class="n">&#8484;</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&#8801;</span> <span class="n">b</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="n">d</span><span class="o">])</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8801;</span> <span class="n">b</span> <span class="bp">^</span> <span class="n">n</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="n">d</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
</section>
<section id="pow-eq-zero-proof">
<span id="id4"></span><h3><span class="section-number">6.1.4. </span>Example<a class="headerlink" href="#pow-eq-zero-proof" title="Permalink to this headline">&#61633;</a></h3>
<p>Let&#8217;s pay another debt.  This is the proof of the theorem <code class="docutils literal notranslate"><span class="pre">pow_eq_zero</span></code>, which we stated without
proof in <a class="reference internal" href="02_Proofs_with_Structure.html#pow-eq-zero-disc"><span class="std std-numref">Example 2.3.6</span></a>.  As we discovered there while proving the cases
<span class="math notranslate nohighlight">\(n=2\)</span> and <span class="math notranslate nohighlight">\(n=3\)</span>, the trick is to apply the lemma <code class="docutils literal notranslate"><span class="pre">eq_zero_or_eq_zero_of_mul_eq_zero</span></code>
over and over again.</p>
<div class="admonition-theorem admonition">
<p class="admonition-title">Theorem</p>
<p>Let <span class="math notranslate nohighlight">\(n\)</span> be a natural number, and let <span class="math notranslate nohighlight">\(a\)</span> be a real number for which <span class="math notranslate nohighlight">\(a ^ n=0\)</span>.
Show that <span class="math notranslate nohighlight">\(a=0\)</span>.</p>
</div>
<div class="admonition-proof admonition">
<p class="admonition-title">Proof</p>
<p>We prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>.  First, the base case is vacuously true: if <span class="math notranslate nohighlight">\(a^0=0\)</span>
then</p>
<div class="math notranslate nohighlight">
\[\begin{split}1&amp;=a^0\\
&amp;=0,\end{split}\]</div>
<p>contradiction.</p>
<p>Now, let <span class="math notranslate nohighlight">\(k\)</span> be a natural number, suppose that we know that if <span class="math notranslate nohighlight">\(a^k=0\)</span> then
<span class="math notranslate nohighlight">\(a=0\)</span> <span class="math notranslate nohighlight">\((\star)\)</span>, and suppose that <span class="math notranslate nohighlight">\(a^{k+1}=0\)</span>.  Then</p>
<div class="math notranslate nohighlight">
\[\begin{split}a^k\cdot a&amp;=a^{k+1}\\
&amp;=0.\end{split}\]</div>
<p>So either <span class="math notranslate nohighlight">\(a^k=0\)</span>, in which case by the inductive hypothesis <span class="math notranslate nohighlight">\((\star)\)</span> we conclude
that <span class="math notranslate nohighlight">\(a=0\)</span>, or else <span class="math notranslate nohighlight">\(a=0\)</span> directly.</p>
</div>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">)</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">&#8594;</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simple_induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">k</span> <span class="n">IH</span>
  <span class="bp">&#183;</span> <span class="c1">-- base case</span>
    <span class="n">intro</span> <span class="n">H</span>
    <span class="k">have</span> <span class="n">h</span> <span class="o">:=</span>
    <span class="k">calc</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">^</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">ring</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">H</span><span class="o">]</span>
    <span class="n">numbers</span> <span class="n">at</span> <span class="n">h</span>
  <span class="bp">&#183;</span> <span class="c1">-- inductive step</span>
    <span class="n">intro</span> <span class="n">H</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">^</span> <span class="n">k</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">&#8744;</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span>
    <span class="bp">&#183;</span> <span class="n">apply</span> <span class="n">eq_zero_or_eq_zero_of_mul_eq_zero</span>
      <span class="k">calc</span> <span class="n">a</span> <span class="bp">^</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">ring</span>
        <span class="n">_</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">H</span><span class="o">]</span>
    <span class="n">obtain</span> <span class="n">H1</span> <span class="bp">|</span> <span class="n">H2</span> <span class="o">:=</span> <span class="n">this</span>
    <span class="bp">&#183;</span> <span class="n">apply</span> <span class="n">IH</span>
      <span class="n">apply</span> <span class="n">H1</span>
    <span class="bp">&#183;</span> <span class="n">apply</span> <span class="n">H2</span>
</pre></div>
</div>
</section>
<section id="id5">
<h3><span class="section-number">6.1.5. </span>Example<a class="headerlink" href="#id5" title="Permalink to this headline">&#61633;</a></h3>
<div class="admonition-problem admonition">
<p class="admonition-title">Problem</p>
<p>Let <span class="math notranslate nohighlight">\(n\)</span> be a natural number.  Show that <span class="math notranslate nohighlight">\(4^n\)</span> is congruent to either <span class="math notranslate nohighlight">\(1\)</span> or
<span class="math notranslate nohighlight">\(4\)</span> modulo 15.</p>
</div>
<div class="admonition-proof admonition">
<p class="admonition-title">Proof</p>
<p>We prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>.  First, <span class="math notranslate nohighlight">\(4^0=1\)</span>, so <span class="math notranslate nohighlight">\(4^0\equiv 1\mod 15\)</span>.</p>
<p>Now, let <span class="math notranslate nohighlight">\(k\)</span> be a natural number, and suppose that we know that <span class="math notranslate nohighlight">\(4^k\)</span> is congruent to
either <span class="math notranslate nohighlight">\(1\)</span> or <span class="math notranslate nohighlight">\(4\)</span> modulo 15.</p>
<p><strong>Case 1</strong> (<span class="math notranslate nohighlight">\(4^k\equiv 1\mod 15\)</span>): Then</p>
<div class="math notranslate nohighlight">
\[\begin{split}4^{k+1}&amp;=4\cdot 4^{k}\\
&amp;\equiv 4 \cdot 1\mod 15\\
&amp;=4.\end{split}\]</div>
<p><strong>Case 1</strong> (<span class="math notranslate nohighlight">\(4^k\equiv 4\mod 15\)</span>): Then</p>
<div class="math notranslate nohighlight">
\[\begin{split}4^{k+1}&amp;=4\cdot 4^{k}\\
&amp;\equiv 4 \cdot 4\mod 15\\
&amp;=15\cdot 1+1\\
&amp;\equiv 1\mod 15.\end{split}\]</div>
</div>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="mi">4</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8801;</span> <span class="mi">1</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">15</span><span class="o">]</span> <span class="bp">&#8744;</span> <span class="mi">4</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8801;</span> <span class="mi">4</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">15</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simple_induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">k</span> <span class="n">IH</span>
  <span class="bp">&#183;</span> <span class="c1">-- base case</span>
    <span class="n">left</span>
    <span class="n">numbers</span>
  <span class="bp">&#183;</span> <span class="c1">-- inductive step</span>
    <span class="n">obtain</span> <span class="n">hk</span> <span class="bp">|</span> <span class="n">hk</span> <span class="o">:=</span> <span class="n">IH</span>
    <span class="bp">&#183;</span> <span class="gr">sorry</span>
    <span class="bp">&#183;</span> <span class="n">left</span>
      <span class="k">calc</span> <span class="o">(</span><span class="mi">4</span><span class="o">:</span><span class="n">&#8484;</span><span class="o">)</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">4</span> <span class="bp">*</span> <span class="mi">4</span> <span class="bp">^</span> <span class="n">k</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">ring</span>
        <span class="n">_</span> <span class="bp">&#8801;</span> <span class="mi">4</span> <span class="bp">*</span> <span class="mi">4</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">15</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rel</span> <span class="o">[</span><span class="n">hk</span><span class="o">]</span>
        <span class="n">_</span> <span class="bp">=</span> <span class="mi">15</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">numbers</span>
        <span class="n">_</span> <span class="bp">&#8801;</span> <span class="mi">1</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">15</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">extra</span>
</pre></div>
</div>
</section>
<section id="induction-starting-point">
<span id="id6"></span><h3><span class="section-number">6.1.6. </span>Example<a class="headerlink" href="#induction-starting-point" title="Permalink to this headline">&#61633;</a></h3>
<p>We can also use induction to prove results about all natural numbers greater than a given number.
We just start the induction at that number.</p>
<div class="admonition-problem admonition">
<p class="admonition-title">Problem</p>
<p>Let <span class="math notranslate nohighlight">\(n\)</span> be a natural number greater than or equal to 2.  Show that <span class="math notranslate nohighlight">\(3 ^n\ge 2^n+5\)</span>.</p>
</div>
<div class="admonition-solution admonition">
<p class="admonition-title">Solution</p>
<p>We prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>, starting at 2.  The base case, <span class="math notranslate nohighlight">\(3^2\geq 2^2+5\)</span>, is
clear.</p>
<p>Suppose now that for some natural number <span class="math notranslate nohighlight">\(k\)</span>, it is true that <span class="math notranslate nohighlight">\(3 ^k\ge 2^k+5\)</span>.  Then</p>
<div class="math notranslate nohighlight">
\[\begin{split}3^{k+1} &amp;=  2 \cdot 3^k + 3^k\\
&amp;\ge 2(2^k+5)+3^k\\
&amp;=2^{k+1}+5+(5+3^k)\\
&amp;\geq 2^{k+1}+5.\end{split}\]</div>
</div>
<p>In Lean, the tactic <code class="docutils literal notranslate"><span class="pre">induction_from_starting_point</span></code> will set up an induction proof starting at a
given point.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8804;</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">&#8484;</span><span class="o">)</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8805;</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">5</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">induction_from_starting_point</span> <span class="n">n</span><span class="o">,</span> <span class="n">hn</span> <span class="k">with</span> <span class="n">k</span> <span class="n">hk</span> <span class="n">IH</span>
  <span class="bp">&#183;</span> <span class="c1">-- base case</span>
    <span class="n">numbers</span>
  <span class="bp">&#183;</span> <span class="c1">-- inductive step</span>
    <span class="k">calc</span> <span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">&#8484;</span><span class="o">)</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="mi">3</span> <span class="bp">^</span> <span class="n">k</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">^</span> <span class="n">k</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">ring</span>
      <span class="n">_</span> <span class="bp">&#8805;</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">^</span> <span class="n">k</span> <span class="bp">+</span> <span class="mi">5</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">^</span> <span class="n">k</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rel</span> <span class="o">[</span><span class="n">IH</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">5</span> <span class="bp">+</span> <span class="o">(</span><span class="mi">5</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">^</span> <span class="n">k</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">ring</span>
      <span class="n">_</span> <span class="bp">&#8805;</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">5</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">extra</span>
</pre></div>
</div>
</section>
<section id="id7">
<h3><span class="section-number">6.1.7. </span>Example<a class="headerlink" href="#id7" title="Permalink to this headline">&#61633;</a></h3>
<p>Induction from a nonzero starting point is a particularly useful technique for &#8220;sufficiently large&#8221;
problems.</p>
<div class="admonition-problem admonition">
<p class="admonition-title">Problem</p>
<p>Show that for all sufficiently large natural numbers <span class="math notranslate nohighlight">\(n\)</span>, <span class="math notranslate nohighlight">\(2^n\geq n^2\)</span>.</p>
</div>
<div class="admonition-solution admonition">
<p class="admonition-title">Solution</p>
<p>We will show this for all natural numbers <span class="math notranslate nohighlight">\(n\geq 4\)</span>.</p>
<p>We prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>, starting at 4.  The base case, <span class="math notranslate nohighlight">\(2^4\geq 4^2\)</span>, is
clear.</p>
<p>Suppose now that for some natural number <span class="math notranslate nohighlight">\(k\geq 4\)</span>, it is true that <span class="math notranslate nohighlight">\(2 ^k\ge k^2\)</span>.
Then</p>
<div class="math notranslate nohighlight">
\[\begin{split}2^{k+1}&amp;=2\cdot 2^k\\
&amp;\geq 2k^2\\
&amp;=k^2+k\cdot k\\
&amp;\geq k^2+4k\\
&amp;=k^2+2k+2k\\
&amp;\geq k^2+2k+2\cdot 4\\
&amp;=(k+1)^2+7\\
&amp;\geq (k+1)^2.\end{split}\]</div>
</div>
<p>Here is the outline of this argument in Lean.  Fill in the sorries.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">forall_sufficiently_large</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8805;</span> <span class="n">n</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">dsimp</span>
  <span class="n">take</span> <span class="mi">4</span>
  <span class="n">intro</span> <span class="n">n</span> <span class="n">hn</span>
  <span class="n">induction_from_starting_point</span> <span class="n">n</span><span class="o">,</span> <span class="n">hn</span> <span class="k">with</span> <span class="n">k</span> <span class="n">hk</span> <span class="n">IH</span>
  <span class="bp">&#183;</span> <span class="c1">-- base case</span>
    <span class="gr">sorry</span>
  <span class="bp">&#183;</span> <span class="c1">-- inductive step</span>
    <span class="gr">sorry</span>
</pre></div>
</div>
</section>
<section id="exercises">
<h3><span class="section-number">6.1.8. </span>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">&#61633;</a></h3>
<ol class="arabic simple">
<li><p>Let <span class="math notranslate nohighlight">\(n\)</span> be a natural number.  Show that <span class="math notranslate nohighlight">\(3 ^n\ge n^2+n+1\)</span>.</p></li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="mi">3</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8805;</span> <span class="n">n</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<ol class="arabic" start="2">
<li><p>Let <span class="math notranslate nohighlight">\(a\geq -1\)</span> be a real number, and let <span class="math notranslate nohighlight">\(n\)</span> be a natural number.  Show that
<span class="math notranslate nohighlight">\((1+a)^n\ge 1+na\)</span>.</p>
<p>This fact is known as <em>Bernoulli&#8217;s inequality</em>.</p>
</li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">&#8477;</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="bp">-</span><span class="mi">1</span> <span class="bp">&#8804;</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="n">a</span><span class="o">)</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8805;</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">a</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Let <span class="math notranslate nohighlight">\(n\)</span> be a natural number.  Show that <span class="math notranslate nohighlight">\(5^n\)</span> is congruent to either <span class="math notranslate nohighlight">\(1\)</span> or
<span class="math notranslate nohighlight">\(5\)</span> modulo 8.</p></li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="mi">5</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8801;</span> <span class="mi">1</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">8</span><span class="o">]</span> <span class="bp">&#8744;</span> <span class="mi">5</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8801;</span> <span class="mi">5</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">8</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Let <span class="math notranslate nohighlight">\(n\)</span> be a natural number.  Show that <span class="math notranslate nohighlight">\(6^n\)</span> is congruent to either <span class="math notranslate nohighlight">\(1\)</span> or
<span class="math notranslate nohighlight">\(6\)</span> modulo 7.</p></li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="mi">6</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8801;</span> <span class="mi">1</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">7</span><span class="o">]</span> <span class="bp">&#8744;</span> <span class="mi">6</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8801;</span> <span class="mi">6</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">7</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Let <span class="math notranslate nohighlight">\(n\)</span> be a natural number.  Show that <span class="math notranslate nohighlight">\(4^n\)</span> is congruent to <span class="math notranslate nohighlight">\(1\)</span>, <span class="math notranslate nohighlight">\(2\)</span>
or <span class="math notranslate nohighlight">\(4\)</span> modulo 7.</p></li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="mi">4</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8801;</span> <span class="mi">1</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">7</span><span class="o">]</span> <span class="bp">&#8744;</span> <span class="mi">4</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8801;</span> <span class="mi">2</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">7</span><span class="o">]</span> <span class="bp">&#8744;</span> <span class="mi">4</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8801;</span> <span class="mi">4</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">7</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Show that for all natural numbers <span class="math notranslate nohighlight">\(n\)</span> sufficiently large, <span class="math notranslate nohighlight">\(3^n\geq 2^n+100\)</span>.</p></li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">forall_sufficiently_large</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">,</span> <span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">&#8484;</span><span class="o">)</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8805;</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">100</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">dsimp</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>Show that for all natural numbers <span class="math notranslate nohighlight">\(n\)</span> sufficiently large, <span class="math notranslate nohighlight">\(2^n\geq n^2+4\)</span>.</p></li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">forall_sufficiently_large</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8805;</span> <span class="n">n</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">4</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">dsimp</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<ol class="arabic simple" start="8">
<li><p>Show that for all natural numbers <span class="math notranslate nohighlight">\(n\)</span> sufficiently large, <span class="math notranslate nohighlight">\(2^n\geq n^3\)</span>.</p></li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">forall_sufficiently_large</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">,</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">&#8805;</span> <span class="n">n</span> <span class="bp">^</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">dsimp</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
</section>
</section>
<section id="recurrence-relations">
<span id="recurrences"></span><h2><span class="section-number">6.2. </span>Recurrence relations<a class="headerlink" href="#recurrence-relations" title="Permalink to this headline">&#61633;</a></h2>
<section id="id8">
<h3><span class="section-number">6.2.1. </span>Example<a class="headerlink" href="#id8" title="Permalink to this headline">&#61633;</a></h3>
<p>A <em>sequence</em> of numbers is an indexed list which goes on forever.  Some sequences are defined by
closed formulas.  For example, <span class="math notranslate nohighlight">\(a_n=2^n\)</span> defines a sequence, the powers of two, with</p>
<div class="math notranslate nohighlight">
\[\begin{split}a_0&amp;=1\\
a_1&amp;=2\\
a_2&amp;=4\\
a_3&amp;=8\\
a_4&amp;=16\\
a_5&amp;=32\\
\ldots\end{split}\]</div>
<p>In Lean, we would define this sequence as</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">a</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="o">:=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">n</span>
</pre></div>
</div>
<p>and Lean will also calculate any term of the sequence we wish:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#eval</span> <span class="n">a</span> <span class="mi">20</span> <span class="c1">-- infoview displays `1048576`</span>
</pre></div>
</div>
<p>However, many important sequences do not have an easy closed formula.  A more flexible way to define
sequences is with a <em>recursive definition</em>.  For example, we can define a sequence <span class="math notranslate nohighlight">\((b_n)\)</span>
recursively by,</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[\begin{split}b_0&amp;=3 \\
\text{for }n:\mathbb{N},\quad b_{n+1} &amp;= b_n{}^2-2.\end{split}\]</div>
</div></blockquote>
<p>The first few terms of this sequence are</p>
<div class="math notranslate nohighlight">
\[\begin{split}b_0&amp;=3\\
b_1&amp;=b_0{}^2-2\\
&amp;=3^2-2\\
&amp;=7\\
b_2&amp;=b_1{}^2-2\\
&amp;=7^2-2\\
&amp;=47\\
b_3&amp;=b_2{}^2-2\\
&amp;=47^2-2\\
&amp;=2207\\
\ldots\end{split}\]</div>
<p>In Lean, we would define this sequence as</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8484;</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="bp">=&gt;</span> <span class="mi">3</span>
  <span class="bp">|</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=&gt;</span> <span class="n">b</span> <span class="n">n</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span>
</pre></div>
</div>
<p>and Lean will also calculate any term of the sequence we wish (up to the limits of its computational
power!):</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#eval</span> <span class="n">b</span> <span class="mi">7</span> <span class="c1">-- infoview displays `316837008400094222150776738483768236006420971486980607`</span>
</pre></div>
</div>
<p>When a sequence is defined recursively, it is convenient to reason about it by induction.</p>
<div class="admonition-problem admonition">
<p class="admonition-title">Problem</p>
<p>Show that for all <span class="math notranslate nohighlight">\(n\)</span>, the integer <span class="math notranslate nohighlight">\(b_n\)</span> is odd.</p>
</div>
<div class="admonition-solution admonition">
<p class="admonition-title">Solution</p>
<p>We will prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>.</p>
<p>First, note that</p>
<div class="math notranslate nohighlight">
\[\begin{split}b_0 &amp;= 3\\
&amp;=2\cdot 1+1,\\\end{split}\]</div>
<p>so <span class="math notranslate nohighlight">\(b_0\)</span> is odd.</p>
<p>Now, let <span class="math notranslate nohighlight">\(k\)</span> be a natural number and suppose that <span class="math notranslate nohighlight">\(b_k\)</span> is odd.  Then there exists an
integer <span class="math notranslate nohighlight">\(x\)</span> such that <span class="math notranslate nohighlight">\(b_k=2x+1\)</span>.  We then have,</p>
<div class="math notranslate nohighlight">
\[\begin{split}b_{k+1} &amp;= b_k{}^2-2\\
&amp;=(2x+1)^2-2\\
&amp;=2(2x^2+2x-1)+1,\end{split}\]</div>
<p>so <span class="math notranslate nohighlight">\(b_{k+1}\)</span> is also odd.</p>
</div>
<p>Here is that solution in Lean; note the use of <code class="docutils literal notranslate"><span class="pre">rw</span> <span class="pre">[b]</span></code> to unfold either piece of the recursive
definition of <span class="math notranslate nohighlight">\(b\)</span>, as needed.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">Odd</span> <span class="o">(</span><span class="n">b</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simple_induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">k</span> <span class="n">hk</span>
  <span class="bp">&#183;</span> <span class="c1">-- base case</span>
    <span class="n">take</span> <span class="mi">1</span>
    <span class="k">calc</span> <span class="n">b</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">b</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">numbers</span>
  <span class="bp">&#183;</span> <span class="c1">-- inductive step</span>
    <span class="n">obtain</span> <span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">&#10217;</span> <span class="o">:=</span> <span class="n">hk</span>
    <span class="n">take</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">-</span> <span class="mi">1</span>
    <span class="k">calc</span> <span class="n">b</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="n">k</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">b</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">hx</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">ring</span>
</pre></div>
</div>
<p>You might like to try giving another proof using the modular-arithmetic characterization of parity;
this will work both in text and in Lean.</p>
</section>
<section id="id9">
<h3><span class="section-number">6.2.2. </span>Example<a class="headerlink" href="#id9" title="Permalink to this headline">&#61633;</a></h3>
<p>Here is another recursively defined sequence:</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[\begin{split}x_0&amp;=5 \\
\text{for }n:\mathbb{N},\quad x_{n+1} &amp;= 2x_n-1.\end{split}\]</div>
</div></blockquote>
<p>In Lean the definition looks like this:</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">x</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8484;</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="bp">=&gt;</span> <span class="mi">5</span>
  <span class="bp">|</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=&gt;</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Work out the first few terms of this sequence (or get Lean to do it for you!).  Here is a property
we can prove about the sequence <span class="math notranslate nohighlight">\((x_n)\)</span>:</p>
<div class="admonition-problem admonition">
<p class="admonition-title">Problem</p>
<p>Show that for all natural numbers <span class="math notranslate nohighlight">\(n\)</span>, <span class="math notranslate nohighlight">\(x_n\equiv 1\mod 4\)</span>.</p>
</div>
<div class="admonition-solution admonition">
<p class="admonition-title">Solution</p>
<p>We prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>.</p>
<p>For the base case, observe that</p>
<div class="math notranslate nohighlight">
\[\begin{split}x_0&amp;=5\\
&amp;=4\cdot 1+1\\
&amp;\equiv 1 \mod 4.\end{split}\]</div>
<p>For the inductive step, suppose that <span class="math notranslate nohighlight">\(x_k\equiv 1\mod 4\)</span> for some natural number <span class="math notranslate nohighlight">\(k\)</span>.
Then</p>
<div class="math notranslate nohighlight">
\[\begin{split}x_{k+1}&amp;=2x_k-1\\
&amp;\equiv 2 \cdot 1-1\mod 4\\
&amp;=1\end{split}\]</div>
<p>also.</p>
</div>
<p>Write out the two parts of the proof of this statement in Lean.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="n">n</span> <span class="bp">&#8801;</span> <span class="mi">1</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">4</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simple_induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">k</span> <span class="n">IH</span>
  <span class="bp">&#183;</span> <span class="c1">-- base case</span>
    <span class="gr">sorry</span>
  <span class="bp">&#183;</span> <span class="c1">-- inductive step</span>
    <span class="gr">sorry</span>
</pre></div>
</div>
</section>
<section id="id10">
<h3><span class="section-number">6.2.3. </span>Example<a class="headerlink" href="#id10" title="Permalink to this headline">&#61633;</a></h3>
<p>Sometimes, a sequence defined recursively can <em>also</em> be given a closed form expression.  This is the
case for the sequence <span class="math notranslate nohighlight">\((x_n)\)</span> from the previous problem.</p>
<div class="admonition-problem admonition">
<p class="admonition-title">Problem</p>
<p>Show that for all natural numbers <span class="math notranslate nohighlight">\(n\)</span>, <span class="math notranslate nohighlight">\(x_n=2^{n+2}+1\)</span>.</p>
</div>
<div class="admonition-solution admonition">
<p class="admonition-title">Solution</p>
<p>We prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>.</p>
<p>For the base case, note that as desired,</p>
<div class="math notranslate nohighlight">
\[\begin{split}x_0&amp;= 5\\
&amp;=2^{0+2}+1.\end{split}\]</div>
<p>For the inductive step, suppose that <span class="math notranslate nohighlight">\(x_k=2^{k+2}+1\)</span> for some natural number <span class="math notranslate nohighlight">\(k\)</span>.
Then</p>
<div class="math notranslate nohighlight">
\[\begin{split}x_{k+1}&amp;=2x_k-1\\
&amp;=2(2^{k+2}+1)-1\\
&amp;=2^{(k+1)+2}+1.\end{split}\]</div>
</div>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simple_induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">k</span> <span class="n">IH</span>
  <span class="bp">&#183;</span> <span class="c1">-- base case</span>
    <span class="k">calc</span> <span class="n">x</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">5</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">x</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">numbers</span>
  <span class="bp">&#183;</span> <span class="c1">-- inductive step</span>
    <span class="k">calc</span> <span class="n">x</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span> <span class="n">k</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">x</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">IH</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">((</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">ring</span>
</pre></div>
</div>
</section>
<section id="id11">
<h3><span class="section-number">6.2.4. </span>Example<a class="headerlink" href="#id11" title="Permalink to this headline">&#61633;</a></h3>
<p>Here is one more recursively defined sequence:</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[\begin{split}A_0&amp;=0 \\
\text{for }n:\mathbb{N},\quad A_{n+1} &amp;= A_n + (n + 1).\end{split}\]</div>
</div></blockquote>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">A</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8474;</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="bp">=&gt;</span> <span class="mi">0</span>
  <span class="bp">|</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=&gt;</span> <span class="n">A</span> <span class="n">n</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>
</div>
<p>Let&#8217;s work out the first terms of this sequence:</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[\begin{split}A_0&amp;=0 \\
A_1&amp;=A_0+1 \\
&amp;=1\\
A_2&amp;=A_1+2 \\
&amp;=1+2\\
&amp;=3\\
A_3&amp;=A_2+3 \\
&amp;=3+3\\
&amp;=6\\
A_4&amp;=A_3+4 \\
&amp;=6+4\\
&amp;=10\\
\ldots\end{split}\]</div>
</div></blockquote>
<p>Note the pattern: first we added 1, then 2, then 3, then 4.  So in fact</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[\begin{split}A_1&amp;=1 \\
A_2&amp;=1+2 \\
A_3&amp;=1+2+3 \\
A_4&amp;=1+2+3+4\\
\ldots\end{split}\]</div>
</div></blockquote>
<p>The term <span class="math notranslate nohighlight">\(A_n\)</span> of the sequence represents the sum of the numbers from 1 to <span class="math notranslate nohighlight">\(n\)</span>.</p>
<div class="admonition-problem admonition">
<p class="admonition-title">Problem</p>
<p>Show that for all natural numbers <span class="math notranslate nohighlight">\(n\)</span>,</p>
<div class="math notranslate nohighlight">
\[A_n=\frac{n(n+1)}{2}.\]</div>
</div>
<div class="admonition-solution admonition">
<p class="admonition-title">Solution</p>
<p>We prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>.  First note that</p>
<div class="math notranslate nohighlight">
\[\begin{split}A_0&amp;=0\\
&amp;=\frac{0(0+1)}{2}.\end{split}\]</div>
<p>This establishes the base case.  Now, let <span class="math notranslate nohighlight">\(k\)</span> be a natural number and suppose that
<span class="math notranslate nohighlight">\(A_k=\frac{k(k+1)}{2}\)</span>.  We then have</p>
<div class="math notranslate nohighlight">
\[\begin{split}A_{k+1}&amp;=A_k+(k+1)\\
&amp;=\frac{k(k+1)}{2}+(k+1)\\
&amp;=\frac{k(k+1)+2(k+1)}{2}\\
&amp;=\frac{(k+1)\cdot[(k+1)+1]}{2}.\end{split}\]</div>
</div>
<p>Here it is in Lean, written with one fewer step because Lean is better at algebra than humans are.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">A</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simple_induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">k</span> <span class="n">IH</span>
  <span class="bp">&#183;</span> <span class="c1">-- base case</span>
    <span class="k">calc</span> <span class="n">A</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">A</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">numbers</span>
  <span class="bp">&#183;</span> <span class="c1">-- inductive step</span>
    <span class="k">calc</span>
      <span class="n">A</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">A</span> <span class="n">k</span> <span class="bp">+</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">A</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="n">k</span> <span class="bp">*</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">+</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">IH</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">ring</span>
</pre></div>
</div>
</section>
<section id="id12">
<h3><span class="section-number">6.2.5. </span>Example<a class="headerlink" href="#id12" title="Permalink to this headline">&#61633;</a></h3>
<p>We built the previous sequence by adding 1, then 2, then 3, etc.  What if we do the same thing but
for multiplication?  This gives the so-called <em>factorial</em> function, with &#8220;<span class="math notranslate nohighlight">\(n\)</span> factorial&#8221;
denoted <span class="math notranslate nohighlight">\(n!\)</span>.</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[\begin{split}0!&amp;=1 \\
\text{for }n:\mathbb{N},\quad(n+1)! &amp;= (n + 1) &#11037; n!\end{split}\]</div>
</div></blockquote>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">factorial</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8469;</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="bp">=&gt;</span> <span class="mi">1</span>
  <span class="bp">|</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=&gt;</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">factorial</span> <span class="n">n</span>

<span class="kd">notation</span><span class="o">:</span><span class="mi">10000</span> <span class="n">n</span> <span class="s2">&quot;!&quot;</span> <span class="bp">=&gt;</span> <span class="n">factorial</span> <span class="n">n</span>
</pre></div>
</div>
<p>So</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[\begin{split}1!&amp;=1 \\
2!&amp;=2\cdot 1 \\
3!&amp;=3\cdot 2\cdot 1 \\
4!&amp;=4\cdot 3\cdot 2\cdot 1.\\
\ldots\end{split}\]</div>
</div></blockquote>
<p>Concretely,</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[\begin{split}0!&amp;=1 \\
1!&amp;=1\cdot A_0 \\
&amp;=1\cdot 1 \\
&amp;=1\\
2!&amp;=2\cdot A_1 \\
&amp;=2\cdot 1 \\
&amp;=2\\
3!&amp;=3\cdot A_2 \\
&amp;=3\cdot 2 \\
&amp;=6\\
4!&amp;=4\cdot A_3 \\
&amp;=4\cdot 6 \\
&amp;=24\\
\ldots\end{split}\]</div>
</div></blockquote>
<div class="admonition-problem admonition">
<p class="admonition-title">Problem</p>
<p>Let <span class="math notranslate nohighlight">\(n\)</span> be a natural number.  Show that every natural number <span class="math notranslate nohighlight">\(d\)</span> with
<span class="math notranslate nohighlight">\(1\le d\le n\)</span> is a factor of <span class="math notranslate nohighlight">\(n!\)</span>.</p>
</div>
<div class="admonition-solution admonition">
<p class="admonition-title">Solution</p>
<p>We prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>.  For the base case, <span class="math notranslate nohighlight">\(n=0\)</span>, the statement is
vacuous, since there is no natural number <span class="math notranslate nohighlight">\(d\)</span> with <span class="math notranslate nohighlight">\(1\le d\le 0\)</span>.</p>
<p>Let <span class="math notranslate nohighlight">\(k\)</span> be a natural number and suppose that every natural number <span class="math notranslate nohighlight">\(d\)</span> with
<span class="math notranslate nohighlight">\(1\le d\le k\)</span> is a factor of <span class="math notranslate nohighlight">\(k!\)</span>.  Now let <span class="math notranslate nohighlight">\(d\)</span> be a natural number with
<span class="math notranslate nohighlight">\(1\le d\le k+1\)</span>.  We must show that <span class="math notranslate nohighlight">\(d\)</span> is a factor of <span class="math notranslate nohighlight">\((k+1)!\)</span>.</p>
<p><strong>Case 1</strong> (<span class="math notranslate nohighlight">\(d=k+1\)</span>): We have that</p>
<div class="math notranslate nohighlight">
\[\begin{split}(k+1)!&amp;=(k+1)\cdot k!\\
&amp;=d\cdot k!,\end{split}\]</div>
<p>so <span class="math notranslate nohighlight">\(d\)</span> is a factor of <span class="math notranslate nohighlight">\((k+1)!\)</span>.</p>
<p><strong>Case 1</strong> (<span class="math notranslate nohighlight">\(d&lt;k+1\)</span>): Then <span class="math notranslate nohighlight">\(d\le k\)</span>, so by the inductive hypothesis <span class="math notranslate nohighlight">\(d\)</span> is a
factor of <span class="math notranslate nohighlight">\(k!\)</span>.  Therefore there exists a natural number <span class="math notranslate nohighlight">\(x\)</span> such that <span class="math notranslate nohighlight">\(k!=dx\)</span>.
We then have</p>
<div class="math notranslate nohighlight">
\[\begin{split}(k+1)!&amp;=(k+1)\cdot k!\\
&amp;=(k+1)\cdot dx\\
&amp;=d\cdot (k+1)x,\end{split}\]</div>
<p>so <span class="math notranslate nohighlight">\(d\)</span> is a factor of <span class="math notranslate nohighlight">\((k+1)!\)</span>.</p>
</div>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">d</span><span class="o">,</span> <span class="mi">1</span> <span class="bp">&#8804;</span> <span class="n">d</span> <span class="bp">&#8594;</span> <span class="n">d</span> <span class="bp">&#8804;</span> <span class="n">n</span> <span class="bp">&#8594;</span> <span class="n">d</span> <span class="bp">&#8739;</span> <span class="n">n</span> <span class="bp">!</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simple_induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">k</span> <span class="n">IH</span>
  <span class="bp">&#183;</span> <span class="c1">-- base case</span>
    <span class="n">intro</span> <span class="n">k</span> <span class="n">hk1</span> <span class="n">hk</span>
    <span class="n">interval_cases</span> <span class="n">k</span>
  <span class="bp">&#183;</span> <span class="c1">-- inductive step</span>
    <span class="n">intro</span> <span class="n">d</span> <span class="n">hk1</span> <span class="n">hk</span>
    <span class="n">obtain</span> <span class="n">hk</span> <span class="bp">|</span> <span class="n">hk</span> <span class="o">:</span> <span class="n">d</span> <span class="bp">=</span> <span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">&#8744;</span> <span class="n">d</span> <span class="bp">&lt;</span> <span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">eq_or_lt_of_le</span> <span class="n">hk</span>
    <span class="bp">&#183;</span> <span class="c1">-- case 1: `d = k + 1`</span>
      <span class="gr">sorry</span>
    <span class="bp">&#183;</span> <span class="c1">-- case 2: `d &lt; k + 1`</span>
      <span class="gr">sorry</span>
</pre></div>
</div>
</section>
<section id="id13">
<h3><span class="section-number">6.2.6. </span>Example<a class="headerlink" href="#id13" title="Permalink to this headline">&#61633;</a></h3>
<div class="admonition-problem admonition">
<p class="admonition-title">Problem</p>
<p>Show that for all natural numbers <span class="math notranslate nohighlight">\(n\)</span>, we have <span class="math notranslate nohighlight">\((n+1)!\ge 2^n\)</span>.</p>
</div>
<div class="admonition-solution admonition">
<p class="admonition-title">Solution</p>
<p>We prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>.</p>
<p>For the base case,</p>
<div class="math notranslate nohighlight">
\[\begin{split}(0+1)!&amp;=(0+1)\cdot 0!\\
&amp;= (0+1)\cdot 1\\
&amp;\ge 2 ^ 0.\end{split}\]</div>
<p>For the inductive step, suppose that for some natural number <span class="math notranslate nohighlight">\(k\)</span>, <span class="math notranslate nohighlight">\((k+1)!\ge 2^k\)</span>.
Then</p>
<div class="math notranslate nohighlight">
\[\begin{split}(k+1+1)!&amp;=(k+1+1)\cdot (k+1)!\\
&amp;\ge(k+1+1)\cdot 2^k\\
&amp;= k\cdot 2^k+2\cdot 2^k\\
&amp;\ge 2\cdot 2^k\\
&amp;=2 ^ {k+1}.\end{split}\]</div>
</div>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">!</span> <span class="bp">&#8805;</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
</section>
<section id="id14">
<h3><span class="section-number">6.2.7. </span>Exercises<a class="headerlink" href="#id14" title="Permalink to this headline">&#61633;</a></h3>
<ol class="arabic">
<li><p>Consider the sequence <span class="math notranslate nohighlight">\((c_n)\)</span> defined recursively by,</p>
<div class="math notranslate nohighlight">
\[\begin{split}c_0&amp;=7 \\
\text{for }n:\mathbb{N},\quad c_{n+1} &amp;= 3c_n-10.\end{split}\]</div>
<p>Show that for all natural numbers <span class="math notranslate nohighlight">\(n\)</span>, the integer <span class="math notranslate nohighlight">\(c_n\)</span> is odd.</p>
</li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">c</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8484;</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="bp">=&gt;</span> <span class="mi">7</span>
  <span class="bp">|</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=&gt;</span> <span class="mi">3</span> <span class="bp">*</span> <span class="n">c</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">10</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">Odd</span> <span class="o">(</span><span class="n">c</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Let the sequence <span class="math notranslate nohighlight">\((c_n)\)</span> be defined as in the previous problem.  Show that for all
<span class="math notranslate nohighlight">\(n\)</span>, <span class="math notranslate nohighlight">\(c_n=2\cdot 3^n+5\)</span>.</p></li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">c</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="mi">3</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">5</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<ol class="arabic" start="3">
<li><p>Consider the sequence <span class="math notranslate nohighlight">\((y_n)\)</span> defined recursively by,</p>
<div class="math notranslate nohighlight">
\[\begin{split}y_0&amp;=2 \\
\text{for }n:\mathbb{N},\quad y_{n+1} &amp;= y_n{}^2.\end{split}\]</div>
<p>Show that for all natural numbers <span class="math notranslate nohighlight">\(n\)</span>, <span class="math notranslate nohighlight">\(y_n=2^{2^n}\)</span>.</p>
</li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">y</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8469;</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="bp">=&gt;</span> <span class="mi">2</span>
  <span class="bp">|</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=&gt;</span> <span class="o">(</span><span class="n">y</span> <span class="n">n</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">y</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">^</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<ol class="arabic" start="4">
<li><p>Consider the sequence <span class="math notranslate nohighlight">\((B_n)\)</span> defined recursively by,</p>
<div class="math notranslate nohighlight">
\[\begin{split}B_0&amp;=0 \\
\text{for }n:\mathbb{N},\quad B_{n+1} &amp;= B_n+(n+1)^2.\end{split}\]</div>
<p>Thus <span class="math notranslate nohighlight">\(B_n\)</span> represents the sum <span class="math notranslate nohighlight">\(1^2+2^2+3^2+\cdots+n^2\)</span>.
Show that for all natural numbers <span class="math notranslate nohighlight">\(n\)</span>,</p>
<div class="math notranslate nohighlight">
\[B_n=\frac{n(n+1)(2n+1)}{6}.\]</div>
</li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">B</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8474;</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="bp">=&gt;</span> <span class="mi">0</span>
  <span class="bp">|</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=&gt;</span> <span class="n">B</span> <span class="n">n</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">&#8474;</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">B</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">6</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<ol class="arabic" start="5">
<li><p>Consider the sequence <span class="math notranslate nohighlight">\((S_n)\)</span> defined recursively by,</p>
<div class="math notranslate nohighlight">
\[\begin{split}S_0&amp;=1 \\
\text{for }n:\mathbb{N},\quad S_{n+1} &amp;= S_n+\frac{1}{2^{n+1}}.\end{split}\]</div>
<p>Thus <span class="math notranslate nohighlight">\(S_n\)</span> represents the sum <span class="math notranslate nohighlight">\(1+\frac{1}{2}+\frac{1}{4}+\cdots+\frac{1}{2^n}\)</span>.
Show that for all natural numbers <span class="math notranslate nohighlight">\(n\)</span>,</p>
<div class="math notranslate nohighlight">
\[S_n=1-\frac{1}{2^n}.\]</div>
</li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">S</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8474;</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="bp">=&gt;</span> <span class="mi">1</span>
  <span class="bp">|</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=&gt;</span> <span class="n">S</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">S</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Show that <span class="math notranslate nohighlight">\(n!\)</span> is strictly positive, for all natural numbers <span class="math notranslate nohighlight">\(n\)</span>.</p></li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="bp">!</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>Show that <span class="math notranslate nohighlight">\(n!\)</span> is even for all <span class="math notranslate nohighlight">\(n\geq 2\)</span>.  Use induction from the starting point 2
(see <a class="reference internal" href="#induction-starting-point"><span class="std std-numref">Example 6.1.6</span></a>).</p></li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">&#8804;</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">Nat.Even</span> <span class="o">(</span><span class="n">n</span> <span class="bp">!</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
</section>
</section>
<section id="two-step-induction">
<span id="id15"></span><h2><span class="section-number">6.3. </span>Two-step induction<a class="headerlink" href="#two-step-induction" title="Permalink to this headline">&#61633;</a></h2>
<section id="id16">
<h3><span class="section-number">6.3.1. </span>Example<a class="headerlink" href="#id16" title="Permalink to this headline">&#61633;</a></h3>
<p>In the last section we studied recursively defined sequences in which each term is constructed from
the previous term.  But it is also possible to define a sequence recursively with reliance on several
previous terms.</p>
<p>For example, here is a sequence defined recursively in terms of the two previous terms.</p>
<div class="math notranslate nohighlight">
\[\begin{split}a_0&amp;=2\\
a_1&amp;=1\\
\text{for }n:\mathbb{N},\quad a_{n+2}&amp;=a_{n+1}+2a_n.\end{split}\]</div>
<p>Notice that since the recurrence relation depends on two previous terms, we need to give two
concrete values of the sequence (<span class="math notranslate nohighlight">\(a_0=2\)</span> and <span class="math notranslate nohighlight">\(a_1=1\)</span>) to start with.</p>
<p>The first few terms of this sequence are</p>
<div class="math notranslate nohighlight">
\[\begin{split}a_0&amp;=2\\
a_1&amp;=1\\
a_2&amp;=a_1+2a_0\\
&amp;=1+2\cdot 2\\
&amp;=5\\
a_3&amp;=a_2+2a_1\\
&amp;=5+2\cdot 1\\
&amp;=7\\
a_4&amp;=a_3+2a_2\\
&amp;=7+2\cdot 5\\
&amp;=17\end{split}\]</div>
<p>In Lean, we would define this sequence as</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">a</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8484;</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="bp">=&gt;</span> <span class="mi">2</span>
  <span class="bp">|</span> <span class="mi">1</span> <span class="bp">=&gt;</span> <span class="mi">1</span>
  <span class="bp">|</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">=&gt;</span> <span class="n">a</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="n">n</span>
</pre></div>
</div>
<p>and, as in the previous section, Lean will calculate for us any term of the sequence</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#eval</span> <span class="n">a</span> <span class="mi">5</span> <span class="c1">-- infoview displays `31`</span>
</pre></div>
</div>
<p>Compute several more terms of the sequence, either on paper or with Lean&#8217;s help.  You will start to
see a pattern: every term of the sequence differs by one from a power of two.  We can prove this
pattern by induction.</p>
<div class="admonition-problem admonition">
<p class="admonition-title">Problem</p>
<p>Prove that for all natural numbers <span class="math notranslate nohighlight">\(n\)</span>, <span class="math notranslate nohighlight">\(a_n=2^n+(-1)^n\)</span>.</p>
</div>
<p>In the proof below, notice that there are <em>two</em> base cases and <em>two</em> inductive hypotheses.  Think
about why.</p>
<div class="admonition-solution admonition">
<p class="admonition-title">Solution</p>
<p>We prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>.</p>
<p>We have that</p>
<div class="math notranslate nohighlight">
\[\begin{split}a_0&amp;=2\\
&amp;=2^0+(-1)^0\end{split}\]</div>
<p>and</p>
<div class="math notranslate nohighlight">
\[\begin{split}a_1&amp;=1\\
&amp;=2^1+(-1)^1.\end{split}\]</div>
<p>Now let <span class="math notranslate nohighlight">\(k\)</span> be a natural number and suppose that <span class="math notranslate nohighlight">\(a_k=2^k+(-1)^k\)</span> and
<span class="math notranslate nohighlight">\(a_{k+1}=2^{k+1}+(-1)^{k+1}\)</span>.  Then</p>
<div class="math notranslate nohighlight">
\[\begin{split}a_{k+2}&amp;=a_{k+1}+2a_k\\
  &amp;=(2^{k+1}+(-1)^{k+1})+2(2^k+(-1)^k)\\
  &amp;=(2\cdot 2^{k}-(-1)^{k})+(2\cdot 2^k+2\cdot (-1)^k)\\
  &amp;=2^2\cdot 2^{k}+(-1)^2\cdot (-1)^{k}\\
  &amp;=2^{k+2}+(-1)^{k+2}.\end{split}\]</div>
</div>
<p>The first two steps (using the recurrence relation and the inductive hypotheses) of the main
calculation are fairly fixed, but you might have more or fewer lines of endgame depending on your
facility with exponent rules and mental arithmetic.  Lean can do it all in one line!</p>
<p>We use the Lean tactic <code class="docutils literal notranslate"><span class="pre">two_step_induction</span></code> for this kind of induction with two base cases and two
inductive hypotheses.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">two_step_induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">k</span> <span class="n">IH1</span> <span class="n">IH2</span>
  <span class="bp">.</span> <span class="k">calc</span> <span class="n">a</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="mi">0</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">numbers</span>
  <span class="bp">.</span> <span class="k">calc</span> <span class="n">a</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="mi">1</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">numbers</span>
  <span class="k">calc</span>
    <span class="n">a</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span>
      <span class="bp">=</span> <span class="n">a</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="n">k</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span>
    <span class="n">_</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">^</span> <span class="n">k</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="n">k</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">IH1</span><span class="o">,</span> <span class="n">IH2</span><span class="o">]</span>
    <span class="n">_</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">&#8484;</span><span class="o">)</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">ring</span>
</pre></div>
</div>
</section>
<section id="id17">
<h3><span class="section-number">6.3.2. </span>Example<a class="headerlink" href="#id17" title="Permalink to this headline">&#61633;</a></h3>
<div class="admonition-problem admonition">
<p class="admonition-title">Problem</p>
<p>Prove that for all natural numbers <span class="math notranslate nohighlight">\(m\geq 1\)</span>, <span class="math notranslate nohighlight">\(a_m\)</span> is congruent to either 1 or 5
modulo 6.</p>
</div>
<div class="admonition-solution admonition">
<p class="admonition-title">Solution</p>
<p>We will prove a more precise result than stated, namely that for all natural numbers
<span class="math notranslate nohighlight">\(n\geq 1\)</span>, either</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(a_n\equiv 1\mod 6\)</span> and <span class="math notranslate nohighlight">\(a_{n+1}\equiv 5\mod 6\)</span>, or</p></li>
<li><p><span class="math notranslate nohighlight">\(a_n\equiv 5\mod 6\)</span> and <span class="math notranslate nohighlight">\(a_{n+1}\equiv 1\mod 6\)</span>.</p></li>
</ul>
<p>We prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>.</p>
<p>For the base case, <span class="math notranslate nohighlight">\(n=1\)</span>, notice that <span class="math notranslate nohighlight">\(a_1=5\)</span> and</p>
<div class="math notranslate nohighlight">
\[\begin{split}a_2&amp;=7\\
&amp;=6\cdot 1+1\\
&amp;\equiv 1\mod 6.\end{split}\]</div>
<p>For the inductive step, let <span class="math notranslate nohighlight">\(k\)</span> be a natural number and suppose that either</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(a_k\equiv 1\mod 6\)</span> and <span class="math notranslate nohighlight">\(a_{k+1}\equiv 5\mod 6\)</span>, or</p></li>
<li><p><span class="math notranslate nohighlight">\(a_k\equiv 5\mod 6\)</span> and <span class="math notranslate nohighlight">\(a_{k+1}\equiv 1\mod 6\)</span>.</p></li>
</ul>
<p><strong>Case 1</strong> (<span class="math notranslate nohighlight">\(a_k\equiv 1\mod 6\)</span> and <span class="math notranslate nohighlight">\(a_{k+1}\equiv 5\mod 6\)</span>): Then</p>
<div class="math notranslate nohighlight">
\[\begin{split}a_{k+2}&amp;=a_{k+1}+2a_k\\
&amp;\equiv 5+2\cdot 1\mod 6\\
&amp;=6\cdot 1+1\\
&amp;\equiv 1\mod 6.\end{split}\]</div>
<p><strong>Case 2</strong> (<span class="math notranslate nohighlight">\(a_k\equiv 5\mod 6\)</span> and <span class="math notranslate nohighlight">\(a_{k+1}\equiv 1\mod 6\)</span>): Then</p>
<div class="math notranslate nohighlight">
\[\begin{split}a_{k+2}&amp;=a_{k+1}+2a_k\\
&amp;\equiv 1+2\cdot 5\mod 6\\
&amp;=6\cdot 1+5\\
&amp;\equiv 5\mod 6.\end{split}\]</div>
</div>
<p>It may not be clear to you exactly why these calculations are what&#8217;s needed to solve the problem.
There is also quite a bit of low-level logical manipulation happening, without being called out
directly in the text.  The Lean proof below may make some of these logical manipulations more
apparent to you.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">}</span> <span class="o">(</span><span class="n">hm</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&#8804;</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="n">m</span> <span class="bp">&#8801;</span> <span class="mi">1</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">6</span><span class="o">]</span> <span class="bp">&#8744;</span> <span class="n">a</span> <span class="n">m</span> <span class="bp">&#8801;</span> <span class="mi">5</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">6</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">have</span> <span class="n">H</span> <span class="o">:</span> <span class="bp">&#8704;</span> <span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">,</span> <span class="mi">1</span> <span class="bp">&#8804;</span> <span class="n">n</span> <span class="bp">&#8594;</span>
      <span class="o">(</span><span class="n">a</span> <span class="n">n</span> <span class="bp">&#8801;</span> <span class="mi">1</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">6</span><span class="o">]</span> <span class="bp">&#8743;</span> <span class="n">a</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">&#8801;</span> <span class="mi">5</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">6</span><span class="o">])</span>
    <span class="bp">&#8744;</span> <span class="o">(</span><span class="n">a</span> <span class="n">n</span> <span class="bp">&#8801;</span> <span class="mi">5</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">6</span><span class="o">]</span> <span class="bp">&#8743;</span> <span class="n">a</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">&#8801;</span> <span class="mi">1</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">6</span><span class="o">])</span>
  <span class="bp">&#183;</span> <span class="n">intro</span> <span class="n">n</span> <span class="n">hn</span>
    <span class="n">induction_from_starting_point</span> <span class="n">n</span><span class="o">,</span> <span class="n">hn</span> <span class="k">with</span> <span class="n">k</span> <span class="n">hk</span> <span class="n">IH</span>
    <span class="bp">&#183;</span> <span class="n">left</span>
      <span class="n">constructor</span>
      <span class="k">calc</span> <span class="n">a</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span>
        <span class="n">_</span> <span class="bp">&#8801;</span> <span class="mi">1</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">6</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">extra</span>
      <span class="k">calc</span> <span class="n">a</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">a</span><span class="o">,</span> <span class="n">a</span><span class="o">,</span> <span class="n">a</span><span class="o">]</span>
        <span class="n">_</span> <span class="bp">=</span> <span class="mi">5</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">numbers</span>
        <span class="n">_</span> <span class="bp">&#8801;</span> <span class="mi">5</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">6</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">extra</span>
    <span class="bp">&#183;</span> <span class="n">obtain</span> <span class="o">&#10216;</span><span class="n">IH1</span><span class="o">,</span> <span class="n">IH2</span><span class="o">&#10217;</span> <span class="bp">|</span> <span class="o">&#10216;</span><span class="n">IH1</span><span class="o">,</span> <span class="n">IH2</span><span class="o">&#10217;</span> <span class="o">:=</span> <span class="n">IH</span>
      <span class="bp">&#183;</span> <span class="n">right</span>
        <span class="n">constructor</span>
        <span class="bp">&#183;</span> <span class="n">apply</span> <span class="n">IH2</span>
        <span class="k">calc</span> <span class="n">a</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="n">k</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span>
          <span class="n">_</span> <span class="bp">&#8801;</span> <span class="mi">5</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="mi">1</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">6</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rel</span> <span class="o">[</span><span class="n">IH1</span><span class="o">,</span> <span class="n">IH2</span><span class="o">]</span>
          <span class="n">_</span> <span class="bp">=</span> <span class="mi">6</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">numbers</span>
          <span class="n">_</span> <span class="bp">&#8801;</span> <span class="mi">1</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">6</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">extra</span>
      <span class="bp">&#183;</span> <span class="n">left</span>
        <span class="n">constructor</span>
        <span class="bp">&#183;</span> <span class="n">apply</span> <span class="n">IH2</span>
        <span class="k">calc</span> <span class="n">a</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="n">k</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span>
          <span class="n">_</span> <span class="bp">&#8801;</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="mi">5</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">6</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rel</span> <span class="o">[</span><span class="n">IH1</span><span class="o">,</span> <span class="n">IH2</span><span class="o">]</span>
          <span class="n">_</span> <span class="bp">=</span> <span class="mi">6</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">5</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">numbers</span>
          <span class="n">_</span> <span class="bp">&#8801;</span> <span class="mi">5</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="mi">6</span><span class="o">]</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">extra</span>
  <span class="n">obtain</span> <span class="o">&#10216;</span><span class="n">H1</span><span class="o">,</span> <span class="n">H2</span><span class="o">&#10217;</span> <span class="bp">|</span> <span class="o">&#10216;</span><span class="n">H1</span><span class="o">,</span> <span class="n">H2</span><span class="o">&#10217;</span> <span class="o">:=</span> <span class="n">H</span> <span class="n">m</span> <span class="n">hm</span>
  <span class="bp">&#183;</span> <span class="n">left</span>
    <span class="n">apply</span> <span class="n">H1</span>
  <span class="bp">&#183;</span> <span class="n">right</span>
    <span class="n">apply</span> <span class="n">H1</span>
</pre></div>
</div>
</section>
<section id="id18">
<h3><span class="section-number">6.3.3. </span>Example<a class="headerlink" href="#id18" title="Permalink to this headline">&#61633;</a></h3>
<p>The most famous example of a sequence defined recursively in terms of its two previous values is the
<em>Fibonacci sequence</em>: each term is the sum of the two previous.</p>
<div class="math notranslate nohighlight">
\[\begin{split}F_0&amp;=1\\
F_1&amp;=1\\
\text{for }n:\mathbb{N},\quad F_{n+2}&amp;=F_{n+1}+F_n.\end{split}\]</div>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">F</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8484;</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="bp">=&gt;</span> <span class="mi">1</span>
  <span class="bp">|</span> <span class="mi">1</span> <span class="bp">=&gt;</span> <span class="mi">1</span>
  <span class="bp">|</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">=&gt;</span> <span class="n">F</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="n">F</span> <span class="n">n</span>
</pre></div>
</div>
<p>Work out the first 10 terms, on paper or with Lean&#8217;s help.</p>
<div class="admonition-problem admonition">
<p class="admonition-title">Problem</p>
<p>Show that the Fibonacci sequence <span class="math notranslate nohighlight">\((F_n)\)</span> satisfies: for all natural numbers <span class="math notranslate nohighlight">\(n\)</span>,
<span class="math notranslate nohighlight">\(F_n \le 2^n\)</span>.</p>
</div>
<div class="admonition-solution admonition">
<p class="admonition-title">Solution</p>
<p>We prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>.</p>
<p>For <span class="math notranslate nohighlight">\(n=0\)</span>, we have that</p>
<div class="math notranslate nohighlight">
\[\begin{split}F_0&amp;=1\\
&amp;\le 2^0.\end{split}\]</div>
<p>For <span class="math notranslate nohighlight">\(n=1\)</span>, we have that</p>
<div class="math notranslate nohighlight">
\[\begin{split}F_1&amp;=1\\
&amp;\le 2^1.\end{split}\]</div>
<p>Let <span class="math notranslate nohighlight">\(k\)</span> be a natural number and suppose that <span class="math notranslate nohighlight">\(F_k\le 2^k\)</span> and
<span class="math notranslate nohighlight">\(F_{k+1}\le 2^{k+1}\)</span>.  Then</p>
<div class="math notranslate nohighlight">
\[\begin{split}F_{k+2}&amp;=F_{k+1}+F_k\\
&amp;\le 2^{k+1}+2^k\\
&amp;\le 2^{k+1}+2^k+2^k\\
&amp;= 2^{k+1}+2^{k+1}\\
&amp;= 2^{k+2}.\end{split}\]</div>
</div>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">F</span> <span class="n">n</span> <span class="bp">&#8804;</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">two_step_induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">k</span> <span class="n">IH1</span> <span class="n">IH2</span>
  <span class="bp">&#183;</span> <span class="k">calc</span> <span class="n">F</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">F</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">&#8804;</span> <span class="mi">2</span> <span class="bp">^</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">numbers</span>
  <span class="bp">&#183;</span> <span class="k">calc</span> <span class="n">F</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">F</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">&#8804;</span> <span class="mi">2</span> <span class="bp">^</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">numbers</span>
  <span class="bp">&#183;</span> <span class="k">calc</span> <span class="n">F</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="n">F</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="n">F</span> <span class="n">k</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">F</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">&#8804;</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">k</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rel</span> <span class="o">[</span><span class="n">IH1</span><span class="o">,</span> <span class="n">IH2</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">&#8804;</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">k</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">k</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">extra</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">ring</span>
</pre></div>
</div>
</section>
<section id="id19">
<h3><span class="section-number">6.3.4. </span>Example<a class="headerlink" href="#id19" title="Permalink to this headline">&#61633;</a></h3>
<div class="admonition-problem admonition">
<p class="admonition-title">Problem</p>
<p>Show that the Fibonacci sequence <span class="math notranslate nohighlight">\((F_n)\)</span> satisfies: for all natural numbers <span class="math notranslate nohighlight">\(n\)</span>,</p>
<div class="math notranslate nohighlight">
\[F_{n+1}^2-F_{n+1}F_n-F_n^2=-(-1)^n.\]</div>
</div>
<div class="admonition-solution admonition">
<p class="admonition-title">Solution</p>
<p>We prove this by induction on <span class="math notranslate nohighlight">\(n\)</span>.  First,</p>
<div class="math notranslate nohighlight">
\[\begin{split}F_1^2-F_1F_0-F_0^2&amp;=1^2-1\cdot 1-1^2\\
&amp;=-(-1)^0.\end{split}\]</div>
<p>Now, let <span class="math notranslate nohighlight">\(k\)</span> be a natural number and suppose that
<span class="math notranslate nohighlight">\(F_{k+1}^2-F_{k+1}F_k-F_k^2=-(-1)^k\)</span>. Then</p>
<div class="math notranslate nohighlight">
\[\begin{split}F_{k+2}^2-F_{k+2}F_{k+1}-F_{k+1}^2
&amp;=(F_{k+1}+F_k)^2-(F_{k+1}+F_k)F_{k+1}-F_{k+1}^2\\
&amp;=-(F_{k+1}^2-F_{k+1}F_k-F_k^2)\\
&amp;=-(-(-1)^k)\\
&amp;=-(-1)^{k+1}.\end{split}\]</div>
</div>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">F</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="n">F</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">F</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">F</span> <span class="n">n</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="bp">-</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simple_induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">k</span> <span class="n">IH</span>
  <span class="bp">&#183;</span> <span class="k">calc</span> <span class="n">F</span> <span class="mi">1</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="n">F</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">F</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">F</span> <span class="mi">0</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">F</span><span class="o">,</span> <span class="n">F</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="bp">-</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">numbers</span>
  <span class="bp">&#183;</span> <span class="k">calc</span> <span class="n">F</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="n">F</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="n">F</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="n">F</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span>
        <span class="bp">=</span> <span class="o">(</span><span class="n">F</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="n">F</span> <span class="n">k</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="o">(</span><span class="n">F</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="n">F</span> <span class="n">k</span><span class="o">)</span> <span class="bp">*</span> <span class="n">F</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="n">F</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">F</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="bp">-</span> <span class="o">(</span><span class="n">F</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="n">F</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">F</span> <span class="n">k</span> <span class="bp">-</span> <span class="n">F</span> <span class="n">k</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">ring</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="bp">-</span> <span class="bp">-</span><span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="n">k</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">IH</span><span class="o">]</span>
      <span class="n">_</span> <span class="bp">=</span> <span class="bp">-</span><span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">ring</span>
</pre></div>
</div>
</section>
<section id="id20">
<h3><span class="section-number">6.3.5. </span>Exercises<a class="headerlink" href="#id20" title="Permalink to this headline">&#61633;</a></h3>
<ol class="arabic">
<li><p>Consider the sequence <span class="math notranslate nohighlight">\((b_n)\)</span> defined recursively by,</p>
<div class="math notranslate nohighlight">
\[\begin{split}b_0&amp;=2\\
b_1&amp;=5\\
\text{for }n:\mathbb{N},\quad b_{n+2}&amp;=5b_{n+1}-6b_n.\end{split}\]</div>
<p>Prove that for all <span class="math notranslate nohighlight">\(n\in\mathbb{N}\)</span>, <span class="math notranslate nohighlight">\(b_n=3^n - 2 ^ n\)</span>.</p>
</li>
</ol>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span> <span class="n">b</span> <span class="o">:</span> <span class="n">&#8469;</span> <span class="bp">&#8594;</span> <span class="n">&#8484;</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="bp">=&gt;</span> <span class="mi">0</span>
  <span class="bp">|</span> <span class="mi">1</span> <span class="bp">=&gt;</span> <span class="mi">1</span>
  <span class="bp">|</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">=&gt;</span> <span class="mi">5</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="mi">6</span> <span class="bp">*</span> <span class="n">b</span> <span class="n">n</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">&#8469;</span><span class="o">)</span> <span class="o">:</span> <span class="n">b</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">3</span> <span class="bp">^</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">2</span> <span class="bp">^</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="05_Logic.html" class="btn btn-neutral float-left" title="5. Logic" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Index_of_Tactics.html" class="btn btn-neutral float-right" title="Index of Lean tactics" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Heather Macbeth.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>